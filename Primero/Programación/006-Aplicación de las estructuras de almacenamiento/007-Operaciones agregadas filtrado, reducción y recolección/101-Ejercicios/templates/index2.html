<!doctype html>
<html>
  <head>
    <style>
      html,body{padding:0px;margin:0px;background:grey;width:100%;height:100%;}
      body{display:flex;justify-content:center;align-items:center;}
      main{width:400px;height:400px;border:6px solid black;background:white;display:grid;grid-template-columns:repeat(3,100fr);border-radius:10px;box-shadow:0px 10px 20px black;}
      section{border:3px solid black;display:grid;grid-template-columns:repeat(3,100fr);}
      div{display:flex;justify-content:center;align-items:center;font-size:30px;border:1px solid black;}
      input{width:100%;height:100%;border:0px;background:rgb(220,220,220);outline:none;transition:all 1s;text-align:center;font-size:30px;}
      input:focus{background:rgb(255,255,220);}
      h1{background:black;color:white;transform:rotate(-90deg);padding:20px;left:35px;position:relative;border-radius:10px 10px 0px 0px;}
    </style>
  </head>
  <body>
    <h1>Sudoku</h1>
    <main>
      
    </main>
    <script>
      let faltan = 0;
      let contenedor = document.querySelector("main")
      fetch("http://127.0.0.1:5000/api")
      .then(function(respuesta){return respuesta.json()})
      .then(function(datos){
        datos.forEach(function(dato){
          let seccion = document.createElement("section")
          dato.forEach(function(numero){
            let contenido = document.createElement("div")
            if(Math.random() < 0.02){
              faltan++;
              let entrada = document.createElement("input")
              contenido.appendChild(entrada)
              entrada.onchange = function(){
                if(this.value == contenido.getAttribute("value")){
                  this.style.background = "rgb(200,255,200)"
                  faltan--;
                  if(faltan == 0){                    // Si has ganado
                    window.location = window.location // Recarga la pÃ¡gina
                  }
                }else{
                  this.style.background = "rgb(255,200,200)"
                }
              }
            }else{
              contenido.textContent = numero
            }
            
            contenido.setAttribute("value",numero)
            seccion.appendChild(contenido)
          })
          contenedor.appendChild(seccion)
        })
      })
    </script>
  </body>
</html>
