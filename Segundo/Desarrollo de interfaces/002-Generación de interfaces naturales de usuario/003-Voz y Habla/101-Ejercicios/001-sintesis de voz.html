<!doctype html>
<html lang="es">
  <meta charset="utf-8" />
  <title>Speech Synthesis (m√≠nimo)</title>
  <textarea id="t" rows="3" style="width:100%">Hola, esto es una prueba de s√≠ntesis de voz en espa√±ol.</textarea>
  <br>
  <button id="s">üîä Hablar</button>
  <script>
    let voices = [];
    function pickVoice() {
      // intenta una voz espa√±ola; si no, usa la primera disponible
      const v = voices.find(v => /es-|Spanish/i.test(v.lang)) || voices[0];
      return v || null;
    }
    function loadVoices() {
      voices = speechSynthesis.getVoices();
    }
    loadVoices();
    speechSynthesis.onvoiceschanged = loadVoices;

    document.getElementById('s').onclick = () => {
      const u = new SpeechSynthesisUtterance(document.getElementById('t').value);
      const v = pickVoice();
      if (v) u.voice = v;
      u.lang = (v && v.lang) || 'es-ES';
      speechSynthesis.cancel(); // por si hab√≠a algo en cola
      speechSynthesis.speak(u);
    };
  </script>
</html>

