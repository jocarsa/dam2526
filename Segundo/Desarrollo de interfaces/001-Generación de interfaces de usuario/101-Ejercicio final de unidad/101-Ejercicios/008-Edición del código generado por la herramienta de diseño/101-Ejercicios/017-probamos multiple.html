<!doctype html>
<html>
  <head>
    <title>Gráficas</title>
    <meta charset="utf-8">
    <style>
      
    </style>
  </head>
  <body>
    <div class="grafica1"></div>
    <div class="grafica2"></div>
    <div class="grafica3"></div>
    <div class="grafica4"></div>  
    <script>
      let datos1 = [
        {
          "Etiqueta":"España",
          "Valor":34
        },
        {
          "Etiqueta":"Francia",
          "Valor":78
        },
        {
          "Etiqueta":"Alemania",
          "Valor":76
        },
        {
          "Etiqueta":"Austria",
          "Valor":87
        },
        {
          "Etiqueta":"Italia",
          "Valor":127
        }
      ]
      let datos2 = [
          {
            "Etiqueta": "Valencia",
            "Valor": 56
          },
          {
            "Etiqueta": "Madrid",
            "Valor": 102
          },
          {
            "Etiqueta": "Barcelona",
            "Valor": 88
          },
          {
            "Etiqueta": "Sevilla",
            "Valor": 74
          },
          {
            "Etiqueta": "Bilbao",
            "Valor": 61
          }
        ]

      
      let datos3 = [
          {
            "Etiqueta": "Python",
            "Valor": 120
          },
          {
            "Etiqueta": "JavaScript",
            "Valor": 98
          },
          {
            "Etiqueta": "C++",
            "Valor": 77
          },
          {
            "Etiqueta": "Java",
            "Valor": 110
          },
          {
            "Etiqueta": "Go",
            "Valor": 45
          }
        ]

      
      let datos4 = [
          {
            "Etiqueta": "Manzana",
            "Valor": 34
          },
          {
            "Etiqueta": "Plátano",
            "Valor": 52
          },
          {
            "Etiqueta": "Naranja",
            "Valor": 46
          },
          {
            "Etiqueta": "Uva",
            "Valor": 29
          },
          {
            "Etiqueta": "Sandía",
            "Valor": 67
          }
        ]

      
      function getRandomHexColor() {
        return "#" + Math.floor(Math.random() * 16777215).toString(16).padStart(6, "0");
      }
      function jvgraficatarta(selector,datos1){
        let suma = 0;
        for(let i = 0;i<datos1.length;i++){
          suma += datos1[i].Valor
        }
        console.log("La suma es:",suma)
        let cursor = 0
        let cadena = ""
        console.log(datos1)
        for(let i = 0;i<datos1.length;i++){
          inicio = cursor*100+"%"
          cursor += (datos1[i].Valor)/suma
          final = cursor*100+"%"
          cadena += getRandomHexColor()+" "+inicio+" "+final+","
        }
        console.log(cadena)
        cadena = cadena.slice(0, -1);
        let grafica = document.querySelector(selector)
        grafica.style.position = "relative"
        grafica.style.width = "240px"
        grafica.style.aspectRatio = 1
        grafica.style.borderRadius = "50%";
        grafica.style.background = `
          conic-gradient(
            `+cadena+`
          )
        `;
      }
      
      jvgraficatarta(".grafica1",datos1)
      jvgraficatarta(".grafica2",datos2)
      jvgraficatarta(".grafica3",datos3)
      jvgraficatarta(".grafica4",datos4)
    </script>
    
  </body>
</html>
