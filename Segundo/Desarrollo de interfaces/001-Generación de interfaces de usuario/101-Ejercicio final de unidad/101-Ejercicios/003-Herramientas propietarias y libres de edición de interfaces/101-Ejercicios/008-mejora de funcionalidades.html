<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Diseñador de formularios (Tema claro)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      :root{
        --bg: #f7fafc;            /* light background */
        --bg-soft: #ffffff;
        --card: #ffffff;
        --text: #0f172a;          /* slate-900 */
        --muted: #64748b;         /* slate-500 */
        --brand: #7c3aed;         /* violet-600 */
        --brand-2: #06b6d4;       /* cyan-500 */
        --line: #e5e7eb;          /* gray-200 */
        --ok: #10b981;            /* emerald-500 */
        --radius-xl: 18px;
        --radius-lg: 14px;
        --shadow-1: 0 10px 30px rgba(2, 6, 23, 0.08);
        --shadow-2: 0 6px 16px rgba(2, 6, 23, 0.06);
        --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
      }

      *{ box-sizing: border-box; }
      html, body{ height:100%; }
      body{
        margin:0;
        font-family: var(--font);
        color: var(--text);
        background:
          radial-gradient(1000px 500px at -10% -10%, rgba(124,58,237,.08), transparent 60%),
          radial-gradient(1000px 500px at 110% -10%, rgba(6,182,212,.10), transparent 60%),
          var(--bg);
      }

      /* Header */
      header{
        padding: 24px clamp(16px, 4vw, 40px);
        border-bottom: 1px solid var(--line);
        background: linear-gradient(180deg, #ffffff 0%, #fbfdff 100%);
        position: sticky; top:0; z-index: 10;
      }
      .title{ display:flex; align-items:center; gap:14px; }
      .logo{
        width:40px; height:40px; border-radius:12px;
        background: conic-gradient(from 180deg, var(--brand), var(--brand-2), var(--brand));
        filter: saturate(1.05);
        box-shadow: var(--shadow-2);
      }
      h1{ margin:0; font-size: clamp(18px, 1.6vw, 24px); letter-spacing:.2px; }
      .subtitle{ margin:4px 0 0 54px; color: var(--muted); font-size: 14px; }

      /* Layout */
      .wrapper{
        padding: clamp(16px, 4vw, 40px);
        display:grid;
        
        gap: 24px;
        max-width: 1280px;
        margin: 0 auto;
      }

      .card{
        background: var(--card);
        border: 1px solid var(--line);
        border-radius: var(--radius-xl);
        box-shadow: var(--shadow-1);
      }

      /* Work area + Components */
      #contenedor{
        display:grid;
        grid-template-columns: 2fr .8fr;
        gap: 20px;
      }

      #areadetrabajo{
        min-height: 360px;
        padding: 18px;
        border-radius: var(--radius-xl);
        border: 1px dashed #d1d5db;
        background: #fcfdff;
        transition: border-color .2s ease, background .2s ease;
      }
      #areadetrabajo:hover{ border-color: #c4b5fd; background: #ffffff; }

      #componentes{
        padding: 18px;
        border-radius: var(--radius-xl);
      }
      #componentes h3{
        margin: 0 0 12px 0;
        font-size: 14px;
        color: var(--muted);
        letter-spacing:.2px;
      }
      .components-grid{
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 10px;
      }
      #componentes button{
        width:100%;
        border: 1px solid var(--line);
        background: linear-gradient(180deg, #ffffff, #f8fafc);
        color: var(--text);
        padding: 10px 12px;
        border-radius: 12px;
        cursor: pointer;
        transition: transform .06s ease, border-color .2s ease, background .2s ease, box-shadow .2s ease;
      }
      #componentes button:hover{
        transform: translateY(-1px);
        border-color: #c4b5fd;
        box-shadow: 0 4px 14px rgba(124,58,237,.12);
        background: linear-gradient(180deg, #ffffff, #f1f5f9);
      }
      #componentes button:active{ transform: translateY(0); }

      /* Field block (label + input) */
      .field{
        display: inline-block;     /* permite ancho por porcentaje y flujo responsivo */
        vertical-align: top;
        padding: 8px;
        margin: 6px 6px 10px 0;
        background: #ffffff;
        border: 1px solid var(--line);
        border-radius: 12px;
        box-shadow: var(--shadow-2);
      }
      .field label{
        display:block;
        font-size: 13px;
        color: var(--muted);
        margin: 2px 0 6px 2px;
      }
      .field input{
        display:block;
        width:100%;
        margin: 0;
        padding: 10px 12px;
        border-radius: 10px;
        background: #f8fafc;
        border: 1px solid #e5e7eb;
        color: var(--text);
        outline: none;
        transition: border-color .2s ease, box-shadow .2s ease, background .2s ease;
      }
      .field input:hover{ border-color: #d1d5db; }
      .field input:focus{
        border-color: #7c3aed;
        box-shadow: 0 0 0 4px rgba(124,58,237,.15);
        background: #ffffff;
      }

      /* Actions + Result */
      .actions{
        display:flex; gap:12px; align-items:center; justify-content:flex-end;
        margin-top: 8px;
      }
      .btn{
        border: 1px solid var(--line);
        border-radius: 12px;
        padding: 10px 14px;
        background: linear-gradient(180deg, #ffffff, #f8fafc);
        color: var(--text);
        cursor:pointer;
        transition: transform .06s ease, border-color .2s ease, background .2s ease, box-shadow .2s ease;
      }
      .btn:hover{
        transform: translateY(-1px);
        border-color: #06b6d4;
        box-shadow: 0 4px 14px rgba(6,182,212,.16);
        background: linear-gradient(180deg, #ffffff, #f1f5f9);
      }
      .btn--primary{
        border-color: #7c3aed;
        background: linear-gradient(180deg, #ffffff, #ede9fe);
      }
      .btn--primary:hover{
        box-shadow: 0 4px 14px rgba(124,58,237,.2);
        background: linear-gradient(180deg, #ffffff, #e9d5ff);
      }

      .result-card{ padding:16px; }
      .result-head{
        display:flex; align-items:center; justify-content:space-between; gap:12px;
        margin-bottom:8px;
      }
      .result-head h3{ margin:0; font-size: 14px; color: var(--muted); }

      .codewrap{
        position: relative;
        border: 1px solid var(--line);
        border-radius: 12px;
        background: #ffffff;
        padding: 12px;
        max-height: 320px;
        overflow: auto;
        font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
        font-size: 13px;
        line-height: 1.45;
        white-space: pre-wrap;
        word-break: break-word;
      }

      /* Toast */
      .toast{
        position: fixed; bottom: 22px; right: 22px;
        background: #ffffff; color: var(--text);
        border:1px solid #c4b5fd;
        border-radius: 12px; padding: 10px 14px;
        box-shadow: var(--shadow-2);
        opacity: 0; transform: translateY(8px);
        transition: opacity .2s ease, transform .2s ease;
        pointer-events: none;
      }
      .toast.show{ opacity:1; transform: translateY(0); }

      /* Responsive */
      @media (max-width: 980px){
        .wrapper{ grid-template-columns: 1fr; }
        #contenedor{ grid-template-columns: 1fr; }
      }
    </style>
  </head>
  <body>
    <header>
      <div class="title">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1>Diseñador de formularios</h1>
          <p class="subtitle">Elige un componente y define id, class, name, label, placeholder y ancho (%)</p>
        </div>
      </div>
    </header>

    <main class="wrapper">
      <!-- Panel principal -->
      <section class="card" style="padding: 20px;">
        <div id="contenedor" class="grid">
          <div id="areadetrabajo" class="card" aria-label="Área de trabajo (previsualización)">
            <!-- Bloques .field aparecerán aquí -->
          </div>

          <aside id="componentes" class="card">
            <h3>Componentes</h3>
            <div class="components-grid">
              <button value="text">Text</button>
              <button value="date">Date</button>
              <button value="password">Password</button>
              <button value="email">Email</button>
              <button value="number">Number</button>
              <button value="time">Time</button>
              <button value="datetime-local">Datetime-local</button>
              <button value="month">Month</button>
              <button value="week">Week</button>
              <button value="color">Color</button>
            </div>
          </aside>
        </div>

        <div class="actions">
          <button id="clear" class="btn" title="Vaciar el área de trabajo">Vaciar</button>
          <button id="html" class="btn btn--primary">Generar HTML</button>
        </div>
      </section>

      <!-- Resultado -->
      <section class="card result-card">
        <div class="result-head">
          <h3>HTML generado</h3>
          <div style="display:flex; gap:8px;">
            <button id="copy" class="btn" title="Copiar al portapapeles">Copiar</button>
          </div>
        </div>
        <div id="resultado" class="codewrap" aria-live="polite"></div>
      </section>
    </main>

    <div id="toast" class="toast" role="status" aria-live="polite"></div>

    <script>
      const areadetrabajo = document.querySelector("#areadetrabajo");
      const componentes = document.querySelector("#componentes");
      const btnHTML = document.querySelector("#html");
      const btnCopy = document.querySelector("#copy");
      const btnClear = document.querySelector("#clear");
      const resultado = document.querySelector("#resultado");
      const toast = document.querySelector("#toast");

      function showToast(msg){
        toast.textContent = msg;
        toast.classList.add("show");
        setTimeout(() => toast.classList.remove("show"), 1600);
      }

      function sanitizePercent(value, fallback = 100){
        const n = parseFloat(String(value).replace(',', '.'));
        if (Number.isFinite(n) && n > 0 && n <= 100) return n;
        return fallback;
      }

      // Crea un bloque .field con label + input
      function createField({tipo, id, clase, nombre, etiqueta, placeholder, anchoPct}){
        // Contenedor
        const field = document.createElement("div");
        field.className = "field";
        field.style.width = `${anchoPct}%`;

        // Label
        const label = document.createElement("label");
        label.htmlFor = id || nombre || tipo;
        label.textContent = etiqueta || nombre || tipo;

        // Input
        const input = document.createElement("input");
        input.type = tipo;
        input.id = id || nombre || `${tipo}_${Math.random().toString(36).slice(2,6)}`;
        if (clase) input.className = clase;
        input.name = nombre || input.id;
        if (placeholder) input.placeholder = placeholder;

        // Estructura
        field.appendChild(label);
        field.appendChild(input);
        return field;
      }

      // Añadir componentes con prompts extendidos
      componentes.addEventListener("click", (e) => {
        if(e.target.tagName !== "BUTTON") return;
        const tipo = e.target.value;

        const id = prompt("Introduce el identificador único (id)", `${tipo}_${Math.random().toString(36).slice(2,6)}`) || "";
        const clase = prompt("Introduce la clase (class)", "campo") || "";
        const nombre = prompt("Introduce el nombre (name)", id || tipo) || "";
        const etiqueta = prompt("Texto de la etiqueta (label)", nombre || tipo) || "";
        const placeholder = prompt("Placeholder (opcional)", "") || "";
        const anchoStr = prompt("Ancho del control en % (1-100)", "100") || "100";
        const anchoPct = sanitizePercent(anchoStr, 100);

        const field = createField({tipo, id, clase, nombre, etiqueta, placeholder, anchoPct});
        areadetrabajo.appendChild(field);
        field.scrollIntoView({ behavior: "smooth", block: "center" });
      });

      // Generar HTML (tal como está en el área de trabajo)
      btnHTML.addEventListener("click", () => {
        // Exporta solo el HTML de los hijos del área de trabajo
        resultado.textContent = areadetrabajo.innerHTML.trim() || "<!-- vacío -->";
        showToast("HTML generado");
      });

      // Copiar al portapapeles
      btnCopy.addEventListener("click", async () => {
        const code = resultado.textContent;
        if(!code){ showToast("Nada que copiar"); return; }
        try{
          await navigator.clipboard.writeText(code);
          showToast("Copiado al portapapeles");
        }catch(err){
          showToast("No se pudo copiar");
        }
      });

      // Vaciar área de trabajo
      btnClear.addEventListener("click", () => {
        areadetrabajo.innerHTML = "";
        resultado.textContent = "";
        showToast("Área de trabajo vaciada");
      });
    </script>
  </body>
</html>

