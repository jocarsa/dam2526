<!doctype html>
<html>
  <body>
    <canvas width=512 height=512>
      
    </canvas>
    <script>
    
      ////////////////// DEFINICIÃ“N DE FUNCIONES
      
      function pintaEscenario(){
        for(let x = 0;x<16;x++){
          for(let y = 0;y<16;y++){
            if(escenario[y][x] == 1){
            contexto.fillStyle = "black"
              contexto.fillRect(
                x*anchurabloque,
                y*anchurabloque,
                anchurabloque,
                anchurabloque
              )
            }
            if(escenario[y][x] == 5){
              if(px == 0){px = x;}
              if(py == 0){py = y;}
              contexto.fillStyle = "red"
              contexto.beginPath();
              contexto.arc(
                x*anchurabloque+anchurabloque/2,
                y*anchurabloque+anchurabloque/2,
                anchurabloque/2,
                0,
                Math.PI*2
              )
              contexto.fill();
            }
          }
        }
      }
      
      function dibujaPersonaje(){
        contexto.fillStyle = "red"
        contexto.beginPath();
        contexto.arc(
          px*anchurabloque+anchurabloque/2,
          py*anchurabloque+anchurabloque/2,
          anchurabloque/2,
          0,
          Math.PI*2
        )
        contexto.fill();
      }
      ///////////////////////// DEFINICION DE VARIABLES GLOBALES
      
      var anchurabloque = 32
      let px = 0;
      let py = 0;
      let velocidad = 32;
      const escenario = [
        [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
        [1,3,2,2,2,2,2,2,2,2,2,2,2,2,3,1],
        [1,2,1,1,2,1,1,2,1,1,2,1,1,2,2,1],
        [1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],
        [1,2,1,1,2,1,2,1,1,1,2,1,2,1,2,1],
        [1,2,2,2,2,1,2,2,2,2,2,1,2,2,2,1],
        [1,2,1,1,2,1,1,4,4,1,2,1,1,2,2,1], // gate to ghost house
        [1,2,2,2,2,1,6,6,6,1,2,2,2,2,2,1], // ghost house (spawns)
        [1,2,1,1,2,1,6,6,6,1,2,1,1,2,2,1],
        [1,2,2,2,2,1,1,1,1,1,2,2,2,2,2,1],
        [1,2,1,1,2,2,2,2,2,2,2,1,1,2,2,1],
        [1,2,2,2,2,1,2,2,2,2,2,1,2,2,2,1],
        [1,2,1,1,2,1,2,5,2,1,2,1,2,1,2,1], // Pac-Man spawn
        [1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],
        [1,3,2,2,2,2,2,2,2,2,2,2,2,2,3,1],
        [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
      ];
      const lienzo = document.querySelector("canvas");
      const contexto = lienzo.getContext("2d");
      
      ///////////////////////// FUNCION PRINCIPAL
      
      pintaEscenario()
      
      document.querySelector("body").onkeydown = function(e){
        console.log(px,py)
        switch(e.key){
          case "w":
            if(escenario[py-1][px] != 1){
              py -= 1;
            }
            break;
          case "s":
            if(escenario[py+1][px] != 1){
              py += 1;
            }
            break;
          case "a":
            if(escenario[py][px-1] != 1){
              px -= 1;
            }
            break;
          case "d":
            if(escenario[py][px+1] != 1){
              px += 1;
            }
            break;
        }
        contexto.clearRect(0,0,512,512);
        pintaEscenario()
        dibujaPersonaje()
      }
    </script>
  </body>
</html>

