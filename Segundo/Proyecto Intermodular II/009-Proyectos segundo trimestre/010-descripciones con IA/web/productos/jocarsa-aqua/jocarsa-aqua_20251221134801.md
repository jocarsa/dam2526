# Reporte de proyecto

## Estructura del proyecto

```
/var/www/html/jocarsa-aqua
├── .gitignore
├── README.md
├── admin.php
├── aqua.png
├── config.php
├── config_sample.php
├── estilo
│   ├── aquafondo.webp
│   ├── escritorio.css
│   └── login.css
├── index.php
├── instalador
│   ├── datosdemuestra.sql
│   ├── index.php
│   └── modelodedatos.sql
└── logout.png
```

## Código (intercalado)

# jocarsa-aqua
**README.md**
```markdown
# jocarsa-aqua
```
**admin.php**
```php
<?php
// admin.php
session_start();
require_once 'config.php';

// Configuración de reporte de errores (ajustable según necesidades)
error_reporting(E_ALL & ~E_WARNING & ~E_NOTICE);
ini_set('display_errors', 1);

// Crear el usuario admin inicial si no existe
$result = $mysqli->query("SELECT id FROM admins WHERE username = 'jocarsa'");
if ($result && $result->num_rows === 0) {
    $passwordHash = password_hash('jocarsa', PASSWORD_DEFAULT);
    $mysqli->query("INSERT INTO admins (username, password, full_name, email) VALUES ('jocarsa', '$passwordHash', 'Jose Vicente Carratala', 'info@josevicentecarratala.com')");
}

// Manejo de inicio de sesión
if ($_SERVER['REQUEST_METHOD'] === 'POST' && isset($_POST['login'])) {
    $username = $_POST['username'];
    $password = $_POST['password'];
    $result = $mysqli->query("SELECT * FROM admins WHERE username = '$username'");
    if ($result && $result->num_rows > 0) {
        $admin = $result->fetch_assoc();
        if (password_verify($password, $admin['password'])) {
            $_SESSION['admin_id'] = $admin['id'];
            header("Location: admin.php");
            exit();
        } else {
            $loginError = "Usuario o contraseña inválidos.";
        }
    } else {
        $loginError = "Usuario o contraseña inválidos.";
    }
}

// Si el admin no está autenticado, mostrar formulario de inicio de sesión
if (!isset($_SESSION['admin_id'])) {
    echo '
    <!DOCTYPE html>
    <html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Acceso Administrativo</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
        <style>
            body { background-color: #f8f9fa; }
            .card {
                border-radius: 10px;
                box-shadow: 0 4px 15px rgba(0,0,0,0.15);
            }
        </style>
    </head>
    <body class="bg-light">
        <div class="container d-flex justify-content-center align-items-center vh-100">
            <div class="card p-4">
                <h2 class="text-center mb-4">Acceso Administrativo</h2>
                ' . (isset($loginError) ? "<div class='alert alert-danger'>{$loginError}</div>" : "") . '
                <form method="POST">
                    <div class="mb-3">
                        <input type="text" name="username" class="form-control" placeholder="Usuario" required>
                    </div>
                    <div class="mb-3">
                        <input type="password" name="password" class="form-control" placeholder="Contraseña" required>
                    </div>
                    <button type="submit" name="login" class="btn btn-primary w-100">Iniciar Sesión</button>
                </form>
            </div>
        </div>
    </body>
    </html>';
    exit();
}

// Manejo de operaciones CRUD
$table  = $_GET['table'] ?? 'users'; // Tabla por defecto
$action = $_GET['action'] ?? 'list';    // Acción por defecto
$id     = $_GET['id'] ?? null;

if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    if ($action === 'add') {
        if ($table === 'users') {
            $username = $_POST['username'];
            $password = password_hash($_POST['password'], PASSWORD_DEFAULT);
            $name     = $_POST['name'];
            $email    = $_POST['email'];
            $mysqli->query("INSERT INTO users (username, password, name, email) VALUES ('$username', '$password', '$name', '$email')");
        } elseif ($table === 'applications') {
            $app_name    = $_POST['app_name'];
            $description = $_POST['description'];
            $logo        = $_POST['logo'];
            $url         = $_POST['url'];
            $mysqli->query("INSERT INTO applications (app_name, description, logo, url) VALUES ('$app_name', '$description', '$logo', '$url')");
        } elseif ($table === 'packs') {
            $name = $_POST['name'];
            $mysqli->query("INSERT INTO packs (name) VALUES ('$name')");
        } elseif ($table === 'apps_in_pack') {
            $pack_id = (int) $_POST['pack_id'];
            $app_id  = (int) $_POST['app_id'];
            $mysqli->query("INSERT INTO apps_in_pack (pack_id, app_id) VALUES ($pack_id, $app_id)");
        } elseif ($table === 'user_packs') {
            $user_id = (int) $_POST['user_id'];
            $pack_id = (int) $_POST['pack_id'];
            $mysqli->query("INSERT INTO user_packs (user_id, pack_id) VALUES ($user_id, $pack_id)");
        } elseif ($table === 'admins') {
            $username  = $_POST['username'];
            $password  = password_hash($_POST['password'], PASSWORD_DEFAULT);
            $full_name = $_POST['full_name'];
            $email     = $_POST['email'];
            $mysqli->query("INSERT INTO admins (username, password, full_name, email) VALUES ('$username', '$password', '$full_name', '$email')");
        }
    } elseif ($action === 'edit' && $id) {
        if ($table === 'users') {
            $username = $_POST['username'];
            $name     = $_POST['name'];
            $email    = $_POST['email'];
            $mysqli->query("UPDATE users SET username = '$username', name = '$name', email = '$email' WHERE id = $id");
        } elseif ($table === 'applications') {
            $app_name    = $_POST['app_name'];
            $description = $_POST['description'];
            $logo        = $_POST['logo'];
            $url         = $_POST['url'];
            $mysqli->query("UPDATE applications SET app_name = '$app_name', description = '$description', logo = '$logo', url = '$url' WHERE id = $id");
        } elseif ($table === 'packs') {
            $name = $_POST['name'];
            $mysqli->query("UPDATE packs SET name = '$name' WHERE id = $id");
        } elseif ($table === 'admins') {
            $username  = $_POST['username'];
            $full_name = $_POST['full_name'];
            $email     = $_POST['email'];
            $mysqli->query("UPDATE admins SET username = '$username', full_name = '$full_name', email = '$email' WHERE id = $id");
        }
    }
    header("Location: admin.php?table=$table");
    exit();
} elseif ($action === 'delete' && $id) {
    $mysqli->query("DELETE FROM $table WHERE id = $id");
    header("Location: admin.php?table=$table");
    exit();
}

// Obtener datos para la tabla seleccionada
$data = [];
if ($action === 'list') {
    $validTables = ['users', 'applications', 'packs', 'apps_in_pack', 'user_packs', 'admins'];
    if (!in_array($table, $validTables)) {
        die("Tabla especificada inválida.");
    }
    if ($table === 'apps_in_pack') {
        $result = $mysqli->query("
            SELECT aip.id, aip.pack_id, aip.app_id, p.name AS pack_name, a.app_name AS app_name
            FROM apps_in_pack aip
            JOIN packs p ON aip.pack_id = p.id
            JOIN applications a ON aip.app_id = a.id
        ");
    } elseif ($table === 'user_packs') {
        $result = $mysqli->query("
            SELECT up.id, up.user_id, up.pack_id, u.username AS user_name, p.name AS pack_name
            FROM user_packs up
            JOIN users u ON up.user_id = u.id
            JOIN packs p ON up.pack_id = p.id
        ");
    } else {
        $result = $mysqli->query("SELECT * FROM $table");
    }
    if ($result) {
        while ($row = $result->fetch_assoc()) {
            $data[] = $row;
        }
    } else {
        die("Consulta fallida: " . $mysqli->error);
    }
} elseif ($action === 'edit' && $id) {
    $result = $mysqli->query("SELECT * FROM $table WHERE id = $id");
    $row = $result ? $result->fetch_assoc() : null;
}

// Obtener opciones para claves foráneas
$usersResult        = $mysqli->query("SELECT id, username FROM users");
$applicationsResult = $mysqli->query("SELECT id, app_name FROM applications");
$packsResult        = $mysqli->query("SELECT id, name FROM packs");
?>
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel Administrativo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .sidebar {
            width: 250px;
            height: 100vh;
            background-color: #f8f9fa;
            padding: 1rem;
            border-right: 1px solid #dee2e6;
        }
        .main-content {
            flex: 1;
            padding: 1rem;
        }
        .nav-link {
            color: #333;
            transition: background-color 0.3s;
        }
        .nav-link:hover,
        .nav-link.active {
            font-weight: bold;
            background-color: #ced4da;
            border-radius: 5px;
        }
    </style>
</head>
<body class="d-flex">
    <!-- Menú lateral -->
    <div class="sidebar">
        <h4 class="mb-4">Panel Administrativo</h4>
        <ul class="nav flex-column">
            <li class="nav-item"><a class="nav-link <?php echo $table === 'users' ? 'active' : ''; ?>" href="?table=users">Usuarios</a></li>
            <li class="nav-item"><a class="nav-link <?php echo $table === 'applications' ? 'active' : ''; ?>" href="?table=applications">Aplicaciones</a></li>
            <li class="nav-item"><a class="nav-link <?php echo $table === 'packs' ? 'active' : ''; ?>" href="?table=packs">Paquetes</a></li>
            <li class="nav-item"><a class="nav-link <?php echo $table === 'apps_in_pack' ? 'active' : ''; ?>" href="?table=apps_in_pack">Apps en Paquete</a></li>
            <li class="nav-item"><a class="nav-link <?php echo $table === 'user_packs' ? 'active' : ''; ?>" href="?table=user_packs">Paquetes de Usuarios</a></li>
            <li class="nav-item"><a class="nav-link <?php echo $table === 'admins' ? 'active' : ''; ?>" href="?table=admins">Administradores</a></li>
        </ul>
    </div>

    <!-- Contenido principal -->
    <div class="main-content">
        <h1 class="mb-4 text-capitalize"><?php echo $table; ?></h1>
        <?php if ($action === 'list'): ?>
            <a href="?table=<?php echo $table; ?>&action=add" class="btn btn-primary mb-3">Agregar Nuevo</a>
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <?php if (!empty($data)): ?>
                            <?php foreach (array_keys($data[0]) as $column): ?>
                                <?php if (!in_array($column, ['pack_id', 'app_id', 'user_id'])): ?>
                                    <th><?php echo ucfirst(str_replace('_', ' ', $column)); ?></th>
                                <?php endif; ?>
                            <?php endforeach; ?>
                        <?php endif; ?>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    <?php foreach ($data as $rowData): ?>
                        <tr>
                            <?php foreach ($rowData as $column => $value): ?>
                                <?php if (!in_array($column, ['pack_id', 'app_id', 'user_id'])): ?>
                                    <td><?php echo $value; ?></td>
                                <?php endif; ?>
                            <?php endforeach; ?>
                            <td>
                                <a href="?table=<?php echo $table; ?>&action=edit&id=<?php echo $rowData['id']; ?>" class="btn btn-sm btn-warning">Editar</a>
                                <a href="?table=<?php echo $table; ?>&action=delete&id=<?php echo $rowData['id']; ?>" class="btn btn-sm btn-danger" onclick="return confirm('¿Está seguro?')">Eliminar</a>
                            </td>
                        </tr>
                    <?php endforeach; ?>
                </tbody>
            </table>
        <?php endif; ?>

        <?php if ($action === 'add' || $action === 'edit'): ?>
            <form method="POST">
                <?php if ($table === 'users'): ?>
                    <div class="mb-3">
                        <label for="username" class="form-label">Usuario</label>
                        <input type="text" name="username" class="form-control" value="<?php echo $row['username'] ?? ''; ?>" required>
                    </div>
                    <?php if ($action === 'add'): ?>
                        <div class="mb-3">
                            <label for="password" class="form-label">Contraseña</label>
                            <input type="password" name="password" class="form-control" required>
                        </div>
                    <?php endif; ?>
                    <div class="mb-3">
                        <label for="name" class="form-label">Nombre</label>
                        <input type="text" name="name" class="form-control" value="<?php echo $row['name'] ?? ''; ?>" required>
                    </div>
                    <div class="mb-3">
                        <label for="email" class="form-label">Correo Electrónico</label>
                        <input type="email" name="email" class="form-control" value="<?php echo $row['email'] ?? ''; ?>" required>
                    </div>
                <?php elseif ($table === 'applications'): ?>
                    <div class="mb-3">
                        <label for="app_name" class="form-label">Nombre de la Aplicación</label>
                        <input type="text" name="app_name" class="form-control" value="<?php echo $row['app_name'] ?? ''; ?>" required>
                    </div>
                    <div class="mb-3">
                        <label for="description" class="form-label">Descripción</label>
                        <textarea name="description" class="form-control"><?php echo $row['description'] ?? ''; ?></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="logo" class="form-label">URL del Logo</label>
                        <input type="text" name="logo" class="form-control" value="<?php echo $row['logo'] ?? ''; ?>">
                    </div>
                    <div class="mb-3">
                        <label for="url" class="form-label">URL de la Aplicación</label>
                        <input type="text" name="url" class="form-control" value="<?php echo $row['url'] ?? ''; ?>" required>
                    </div>
                <?php elseif ($table === 'packs'): ?>
                    <div class="mb-3">
                        <label for="name" class="form-label">Nombre del Paquete</label>
                        <input type="text" name="name" class="form-control" value="<?php echo $row['name'] ?? ''; ?>" required>
                    </div>
                <?php elseif ($table === 'apps_in_pack'): ?>
                    <div class="mb-3">
                        <label for="pack_id" class="form-label">Paquete</label>
                        <select name="pack_id" class="form-select" required>
                            <?php while ($pack = $packsResult->fetch_assoc()): ?>
                                <option value="<?php echo $pack['id']; ?>"><?php echo $pack['name']; ?></option>
                            <?php endwhile; ?>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="app_id" class="form-label">Aplicación</label>
                        <select name="app_id" class="form-select" required>
                            <?php while ($app = $applicationsResult->fetch_assoc()): ?>
                                <option value="<?php echo $app['id']; ?>"><?php echo $app['app_name']; ?></option>
                            <?php endwhile; ?>
                        </select>
                    </div>
                <?php elseif ($table === 'user_packs'): ?>
                    <div class="mb-3">
                        <label for="user_id" class="form-label">Usuario</label>
                        <select name="user_id" class="form-select" required>
                            <?php while ($user = $usersResult->fetch_assoc()): ?>
                                <option value="<?php echo $user['id']; ?>"><?php echo $user['username']; ?></option>
                            <?php endwhile; ?>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="pack_id" class="form-label">Paquete</label>
                        <select name="pack_id" class="form-select" required>
                            <?php while ($pack = $packsResult->fetch_assoc()): ?>
                                <option value="<?php echo $pack['id']; ?>"><?php echo $pack['name']; ?></option>
                            <?php endwhile; ?>
                        </select>
                    </div>
                <?php elseif ($table === 'admins'): ?>
                    <div class="mb-3">
                        <label for="username" class="form-label">Usuario</label>
                        <input type="text" name="username" class="form-control" value="<?php echo $row['username'] ?? ''; ?>" required>
                    </div>
                    <?php if ($action === 'add'): ?>
                        <div class="mb-3">
                            <label for="password" class="form-label">Contraseña</label>
                            <input type="password" name="password" class="form-control" required>
                        </div>
                    <?php endif; ?>
                    <div class="mb-3">
                        <label for="full_name" class="form-label">Nombre Completo</label>
                        <input type="text" name="full_name" class="form-control" value="<?php echo $row['full_name'] ?? ''; ?>" required>
                    </div>
                    <div class="mb-3">
                        <label for="email" class="form-label">Correo Electrónico</label>
                        <input type="email" name="email" class="form-control" value="<?php echo $row['email'] ?? ''; ?>" required>
                    </div>
                <?php endif; ?>
                <button type="submit" class="btn btn-primary">Guardar</button>
                <a href="?table=<?php echo $table; ?>" class="btn btn-secondary">Cancelar</a>
            </form>
        <?php endif; ?>
    </div>
</body>
</html>


```
**config.php**
```php
<?php
// config.php
$host = 'localhost';
$dbname = 'jocarsa-aqua';
$user = 'jocarsa-aqua';
$password = '******';

$mysqli = new mysqli($host, $user, $password, $dbname);
if ($mysqli->connect_error) {
    die("Connection failed: " . $mysqli->connect_error);
}
?>


```
**config_sample.php**
```php
<?php
// config.php
$host = 'localhost';
$dbname = '';
$user = '';
$password = '';

$mysqli = new mysqli($host, $user, $password, $dbname);
if ($mysqli->connect_error) {
    die("Connection failed: " . $mysqli->connect_error);
}
?>


```
**index.php**
```php
<?php
// index.php
session_start();
require_once 'config.php';

class Encoder {
    private string $method = 'AES-256-CBC';
    private string $encryptionKey = 'RIG3R75QPwIcu4mMwLarwf2kjawfbdHH';

    public function encode(string $data): string {
        $ivLength = openssl_cipher_iv_length($this->method);
        $iv = openssl_random_pseudo_bytes($ivLength);
        $encrypted = openssl_encrypt($data, $this->method, $this->encryptionKey, OPENSSL_RAW_DATA, $iv);
        if ($encrypted === false) {
            throw new RuntimeException('Encryption failed.');
        }
        return base64_encode($iv . $encrypted);
    }

    public function decode(string $encodedData): string {
        $raw = base64_decode($encodedData, true);
        if ($raw === false) {
            throw new RuntimeException('Base64 decoding failed.');
        }
        $ivLength = openssl_cipher_iv_length($this->method);
        $iv = substr($raw, 0, $ivLength);
        $cipherText = substr($raw, $ivLength);
        $decrypted = openssl_decrypt($cipherText, $this->method, $this->encryptionKey, OPENSSL_RAW_DATA, $iv);
        if ($decrypted === false) {
            throw new RuntimeException('Decryption failed.');
        }
        return $decrypted;
    }
}

// Handle login for users
if ($_SERVER['REQUEST_METHOD'] === 'POST' && isset($_POST['login'])) {
    $username = $_POST['username'];
    $password = $_POST['password'];
    $result = $mysqli->query("SELECT * FROM users WHERE username = '$username'");
    if ($result && $result->num_rows > 0) {
        $user = $result->fetch_assoc();
        if (password_verify($password, $user['password'])) {
            $_SESSION['user_id'] = $user['id'];
            $_SESSION['username'] = $username;
            $_SESSION['password'] = $password; // Nota: En producción no se recomienda almacenar en texto plano
            header("Location: index.php");
            exit();
        } else {
            $loginError = "Invalid username or password.";
        }
    } else {
        $loginError = "Invalid username or password.";
    }
}

// Logout
if (isset($_GET['logout'])) {
    session_destroy();
    header("Location: index.php");
    exit();
}

// Si el usuario no está autenticado, mostrar formulario de login
if (!isset($_SESSION['user_id'])) {
    echo '
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Login</title>
       <link rel="stylesheet" href="estilo/login.css">
       <link rel="icon" type="image/svg+xml" href="aqua.png" id="favicon" />
    </head>
    <body>
        <div class="login-container">
            <div class="card">
                <img src="aqua.png">
                <h1>jocarsa | aqua</h1>
                '.(isset($loginError) ? "<div class='alert'>$loginError</div>" : "").'
                <form method="POST">
                    <div class="form-group">
                        <input type="text" name="username" class="form-control" placeholder="Usuario" required />
                    </div>
                    <div class="form-group">
                        <input type="password" name="password" class="form-control" placeholder="Contraseña" required />
                    </div>
                    <button type="submit" name="login" class="btn">Login</button>
                </form>
            </div>
        </div>
    </body>
    </html>
    ';
    exit();
}

// Si el usuario está logueado, encriptar credenciales usando Encoder
$encoder = new Encoder();
if (isset($_SESSION['username']) && isset($_SESSION['password'])) {
    $encryptedUsername = $encoder->encode($_SESSION['username']);
    $encryptedPassword = $encoder->encode($_SESSION['password']);
}

// Obtener packs y aplicaciones del usuario
$user_id = $_SESSION['user_id'];
$packsResult = $mysqli->query("SELECT p.id, p.name 
                               FROM packs p 
                               JOIN user_packs up ON p.id = up.pack_id 
                               WHERE up.user_id = $user_id");

$applications = [];
if ($packsResult) {
    while ($pack = $packsResult->fetch_assoc()) {
        $appsResult = $mysqli->query("SELECT a.id, a.app_name, a.description, a.logo, a.url
                                      FROM applications a
                                      JOIN apps_in_pack aip ON a.id = aip.app_id
                                      WHERE aip.pack_id = {$pack['id']}");
        while ($app = $appsResult->fetch_assoc()) {
            $applications[] = $app;
        }
    }
}
$appCount = count($applications);
$cols = $appCount > 0 ? ceil(sqrt($appCount)) : 1;
$rows = $appCount > 0 ? ceil($appCount / $cols) : 1;
?>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>jocarsa | aqua</title>
    <link rel='icon' type='image/svg+xml' href='aqua.png' id="favicon" />
    <link rel="stylesheet" href="estilo/escritorio.css">
</head>
<body>
    <div class="layout">
        <!-- Navegación lateral -->
        <div class="left-nav" id="leftNav">
            <a class="nav-link" onclick="loadDashboard()">
                <img src="aqua.png" alt="Dashboard">
                <span class="nav-text">Dashboard</span>
            </a>
            <?php foreach ($applications as $app): ?>
                <a class="nav-link" onclick="loadApp('<?php echo $app['url']; ?>')">
                    <img src="https://static.jocarsa.com/logos/<?php echo $app['logo']; ?>" alt="<?php echo $app['app_name']; ?>">
                    <span class="nav-text"><?php echo $app['app_name']; ?></span>
                </a>
            <?php endforeach; ?>
            <button class="toggle-nav" onclick="toggleNav()">></button>
            <a class="nav-link" onclick="logout()">
                <img src="logout.png" alt="Logout">
                <span class="nav-text">Logout</span>
            </a>
        </div>

        <!-- Contenido principal -->
        <div class="main-content">
            <div id="dashboard">
                <?php foreach ($applications as $app): ?>
                    <div class="app-card" onclick="loadApp('<?php echo $app['url']; ?>')">
                        <img src="https://static.jocarsa.com/logos/<?php echo $app['logo']; ?>" alt="<?php echo $app['app_name']; ?>">
                        <div class="card-body">
                            <h5 class="card-title"><?php echo $app['app_name']; ?></h5>
                            <p class="card-text"><?php echo $app['description']; ?></p>
                        </div>
                    </div>
                <?php endforeach; ?>
                <?php if ($appCount === 0): ?>
                    <p>No applications available.</p>
                <?php endif; ?>
            </div>
            <iframe id="app-frame"></iframe>
        </div>
    </div>

    <script>
        function saveCredentials(username, password) {
            localStorage.setItem('username', username);
            localStorage.setItem('password', password);
        }
        function clearCredentials() {
            localStorage.removeItem('username');
            localStorage.removeItem('password');
        }
        function loadApp(url) {
            const username = localStorage.getItem('username');
            const password = localStorage.getItem('password');
            const appUrl = `${url}?username=${encodeURIComponent(username)}&password=${encodeURIComponent(password)}`;
            document.getElementById("dashboard").style.display = "none";
            document.getElementById("app-frame").style.display = "block";
            document.getElementById("app-frame").src = appUrl;
            document.getElementById("app-frame").onload = function() {
                const iframeDoc = this.contentDocument || this.contentWindow.document;
                const iframeTitle = iframeDoc.title;
                const iframeFavicon = iframeDoc.querySelector('link[rel="icon"]')?.href;
                document.title = iframeTitle;
                if (iframeFavicon) {
                    document.getElementById("favicon").href = iframeFavicon;
                }
            };
        }
        function loadDashboard() {
            document.getElementById("dashboard").style.display = "grid";
            document.getElementById("app-frame").style.display = "none";
            document.title = "jocarsa | aqua";
            document.getElementById("favicon").href = "aqua.png";
        }
        function toggleNav() {
            document.getElementById("leftNav").classList.toggle("expanded");
        }
        function logout() {
            clearCredentials();
            window.location.href = 'index.php?logout=true';
        }
        <?php if (isset($encryptedUsername) && isset($encryptedPassword)): ?>
            saveCredentials('<?php echo $encryptedUsername; ?>', '<?php echo $encryptedPassword; ?>');
        <?php endif; ?>
    </script>
</body>
</html>


```
## estilo
**escritorio.css**
```css
@import url('https://fonts.googleapis.com/css2?family=Ubuntu:wght@300;400;500;700&display=swap');
        body { margin: 0; padding: 0; background-color: #f8f9fa; font-family: 'Ubuntu', sans-serif; }
        .layout { display: flex; min-height: 100vh; }
        .left-nav { width: 80px; background-color: #343a40; color: #fff; padding: 1rem 0.5rem; box-shadow: -17px 0 25px rgba(0, 0, 0, 0.5) inset; transition: width 0.3s ease; }
        .left-nav.expanded { width: 300px; }
        .main-content { flex: 1; padding: 0; position: relative; }
        .nav-link { display: flex; align-items: center; color: #fff; text-decoration: none; margin-bottom: 1rem; cursor: pointer; }
        .nav-link img { width: 40px; height: 40px; margin-right: 10px; }
        .nav-link:hover { opacity: 0.8; }
        .nav-text { display: none; white-space: nowrap; }
        .left-nav.expanded .nav-text { display: inline; }
        .toggle-nav { position: absolute; bottom: 10px; left: 10px; background-color: #007bff; color: #fff; border: none; padding: 0.5rem 1rem; cursor: pointer; border-radius: 40px; width:50px; height:50px; }
        .toggle-nav:hover { background-color: #0056b3; }
        :root {
            --app-count: <?php echo $appCount; ?>;
            --app-cols: 5;
            --app-rows: <?php echo $rows; ?>;
            --gap: 1rem;
            --padding: 2rem;
            --aspect-ratio: 2/2;
        }
        #dashboard {
            display: grid;
            grid-template-columns: repeat(var(--app-cols), 1fr);
            gap: var(--gap);
            padding: var(--padding);
            width: calc(100vw - 80px - (2 * var(--padding)));
            min-height: calc(100vh - (2 * var(--padding)));
            margin: auto;
        }
        .app-card {
            background-color: #fff;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            border-radius: 4px;
            cursor: pointer;
            transition: transform 0.2s;
            padding: 1rem;
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            aspect-ratio: var(--aspect-ratio);
        }
        .app-card:hover { transform: scale(1.05); }
        .app-card img {
            max-width: 100%;  
            max-height:auto;
            margin:auto;
        }
        .card-title { margin: 0 0 0.5rem; font-size: 1rem; font-weight: bold; }
        .card-text { margin: 0; font-size: 0.9rem; color: #666; }
        #app-frame {
            width: calc(100vw - 80px);
            height: 100vh;
            border: none;
            display: none;
            position: absolute;
            top: 0;
            left: 0;
        }

```
**login.css**
```css
@import url("https://fonts.googleapis.com/css2?family=Ubuntu:wght@300;400;500;700&display=swap");
            body {
                margin: 0; padding: 0;
                background-color: #f8f9fa;
                font-family: Ubuntu, sans-serif;
                background:url("aquafondo.webp");
                background-size:cover;
            }
            input{box-sizing:border-box;}
            .login-container { 
            	display: flex; 
            	justify-content: center; 
            	align-items: center; height: 100vh;
            	 }
            .card { 
            	background-color: #fff; 
            	padding: 2rem; 
            	box-shadow: 0 2px 5px rgba(0,0,0,0.1); 
            	border-radius: 200px 200px 5px 5px; 
            	width: 300px; 
            	}
            .card img { 
            	width:100%; 
            }
            .card h1 { 
		         text-align: center; 
		         margin-bottom: 1rem; 
            }
            .alert { 
		         background-color: #f8d7da; 
		         color: #721c24; 
		         padding: 0.75rem; 
		         border-radius: 4px; 
		         margin-bottom: 1rem; 
            }
            .form-group { 
            	margin-bottom: 1rem; 
            }
            .form-control { 
		         width: 100%; 
		         padding: 0.5rem; 
		         border: 1px solid #ccc; 
		         border-radius: 4px; 
            }
            .btn { 
		         width: 100%; 
		         padding: 0.75rem; 
		         border: none; 
		         background-color: #007bff; 
		         color: #fff; 
		         font-size: 1rem; 
		         border-radius: 4px; 
		         cursor: pointer; 
            }
            .btn:hover { 
            	background-color: #0056b3;
             }

```
## instalador
**datosdemuestra.sql**
```sql
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | aliceblue', '', 'aliceblue.png', 'https://aliceblue.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | antiquewhite', '', 'antiquewhite.png', 'https://antiquewhite.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | aqua', '', 'aqua.png', 'https://aqua.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | aquamarine', '', 'aquamarine.png', 'https://aquamarine.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | azure', '', 'azure.png', 'https://azure.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | beige', '', 'beige.png', 'https://beige.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | bisque', '', 'bisque.png', 'https://bisque.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | black', '', 'black.png', 'https://black.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | blanchedalmond', '', 'blanchedalmond.png', 'https://blanchedalmond.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | blue', '', 'blue.png', 'https://blue.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | blueviolet', '', 'blueviolet.png', 'https://blueviolet.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | brown', '', 'brown.png', 'https://brown.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | burlywood', '', 'burlywood.png', 'https://burlywood.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | cadetblue', '', 'cadetblue.png', 'https://cadetblue.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | chartreuse', '', 'chartreuse.png', 'https://chartreuse.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | chocolate', '', 'chocolate.png', 'https://chocolate.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | coral', '', 'coral.png', 'https://coral.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | cornflowerblue', '', 'cornflowerblue.png', 'https://cornflowerblue.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | cornsilk', '', 'cornsilk.png', 'https://cornsilk.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | crimson', '', 'crimson.png', 'https://crimson.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | cyan', '', 'cyan.png', 'https://cyan.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | darkblue', '', 'darkblue.png', 'https://darkblue.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | darkcyan', '', 'darkcyan.png', 'https://darkcyan.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | darkgoldenrod', '', 'darkgoldenrod.png', 'https://darkgoldenrod.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | darkgray', '', 'darkgray.png', 'https://darkgray.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | darkgreen', '', 'darkgreen.png', 'https://darkgreen.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | darkkhaki', '', 'darkkhaki.png', 'https://darkkhaki.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | darkmagenta', '', 'darkmagenta.png', 'https://darkmagenta.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | darkolivegreen', '', 'darkolivegreen.png', 'https://darkolivegreen.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | darkorange', '', 'darkorange.png', 'https://darkorange.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | darkorchid', '', 'darkorchid.png', 'https://darkorchid.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | darkred', '', 'darkred.png', 'https://darkred.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | darksalmon', '', 'darksalmon.png', 'https://darksalmon.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | darkseagreen', '', 'darkseagreen.png', 'https://darkseagreen.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | darkslateblue', '', 'darkslateblue.png', 'https://darkslateblue.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | darkslategray', '', 'darkslategray.png', 'https://darkslategray.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | darkturquoise', '', 'darkturquoise.png', 'https://darkturquoise.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | darkviolet', '', 'darkviolet.png', 'https://darkviolet.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | deeppink', '', 'deeppink.png', 'https://deeppink.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | deepskyblue', '', 'deepskyblue.png', 'https://deepskyblue.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | dimgray', '', 'dimgray.png', 'https://dimgray.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | dodgerblue', '', 'dodgerblue.png', 'https://dodgerblue.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | firebrick', '', 'firebrick.png', 'https://firebrick.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | floralwhite', '', 'floralwhite.png', 'https://floralwhite.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | forestgreen', '', 'forestgreen.png', 'https://forestgreen.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | fuchsia', '', 'fuchsia.png', 'https://fuchsia.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | gainsboro', '', 'gainsboro.png', 'https://gainsboro.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | ghostwhite', '', 'ghostwhite.png', 'https://ghostwhite.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | gold', '', 'gold.png', 'https://gold.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | goldenrod', '', 'goldenrod.png', 'https://goldenrod.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | gray', '', 'gray.png', 'https://gray.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | green', '', 'green.png', 'https://green.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | greenyellow', '', 'greenyellow.png', 'https://greenyellow.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | honeydew', '', 'honeydew.png', 'https://honeydew.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | hotpink', '', 'hotpink.png', 'https://hotpink.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | indianred', '', 'indianred.png', 'https://indianred.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | indigo', '', 'indigo.png', 'https://indigo.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | ivory', '', 'ivory.png', 'https://ivory.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | khaki', '', 'khaki.png', 'https://khaki.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | lavender', '', 'lavender.png', 'https://lavender.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | lavenderblush', '', 'lavenderblush.png', 'https://lavenderblush.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | lawngreen', '', 'lawngreen.png', 'https://lawngreen.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | lemonchiffon', '', 'lemonchiffon.png', 'https://lemonchiffon.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | lightblue', '', 'lightblue.png', 'https://lightblue.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | lightcoral', '', 'lightcoral.png', 'https://lightcoral.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | lightcyan', '', 'lightcyan.png', 'https://lightcyan.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | lightgoldenrodyellow', '', 'lightgoldenrodyellow.png', 'https://lightgoldenrodyellow.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | lightgray', '', 'lightgray.png', 'https://lightgray.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | lightgreen', '', 'lightgreen.png', 'https://lightgreen.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | lightpink', '', 'lightpink.png', 'https://lightpink.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | lightsalmon', '', 'lightsalmon.png', 'https://lightsalmon.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | lightseagreen', '', 'lightseagreen.png', 'https://lightseagreen.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | lightskyblue', '', 'lightskyblue.png', 'https://lightskyblue.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | lightslategray', '', 'lightslategray.png', 'https://lightslategray.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | lightsteelblue', '', 'lightsteelblue.png', 'https://lightsteelblue.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | lightyellow', '', 'lightyellow.png', 'https://lightyellow.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | lime', '', 'lime.png', 'https://lime.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | limegreen', '', 'limegreen.png', 'https://limegreen.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | linen', '', 'linen.png', 'https://linen.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | magenta', '', 'magenta.png', 'https://magenta.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | maroon', '', 'maroon.png', 'https://maroon.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | mediumaquamarine', '', 'mediumaquamarine.png', 'https://mediumaquamarine.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | mediumblue', '', 'mediumblue.png', 'https://mediumblue.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | mediumorchid', '', 'mediumorchid.png', 'https://mediumorchid.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | mediumpurple', '', 'mediumpurple.png', 'https://mediumpurple.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | mediumseagreen', '', 'mediumseagreen.png', 'https://mediumseagreen.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | mediumslateblue', '', 'mediumslateblue.png', 'https://mediumslateblue.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | mediumspringgreen', '', 'mediumspringgreen.png', 'https://mediumspringgreen.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | mediumturquoise', '', 'mediumturquoise.png', 'https://mediumturquoise.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | mediumvioletred', '', 'mediumvioletred.png', 'https://mediumvioletred.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | midnightblue', '', 'midnightblue.png', 'https://midnightblue.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | mintcream', '', 'mintcream.png', 'https://mintcream.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | mistyrose', '', 'mistyrose.png', 'https://mistyrose.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | moccasin', '', 'moccasin.png', 'https://moccasin.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | navajowhite', '', 'navajowhite.png', 'https://navajowhite.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | navy', '', 'navy.png', 'https://navy.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | oldlace', '', 'oldlace.png', 'https://oldlace.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | olive', '', 'olive.png', 'https://olive.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | olivedrab', '', 'olivedrab.png', 'https://olivedrab.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | orange', '', 'orange.png', 'https://orange.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | orangered', '', 'orangered.png', 'https://orangered.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | orchid', '', 'orchid.png', 'https://orchid.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | palegoldenrod', '', 'palegoldenrod.png', 'https://palegoldenrod.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | palegreen', '', 'palegreen.png', 'https://palegreen.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | paleturquoise', '', 'paleturquoise.png', 'https://paleturquoise.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | palevioletred', '', 'palevioletred.png', 'https://palevioletred.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | papayawhip', '', 'papayawhip.png', 'https://papayawhip.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | peachpuff', '', 'peachpuff.png', 'https://peachpuff.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | peru', '', 'peru.png', 'https://peru.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | pink', '', 'pink.png', 'https://pink.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | plum', '', 'plum.png', 'https://plum.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | powderblue', '', 'powderblue.png', 'https://powderblue.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | purple', '', 'purple.png', 'https://purple.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | rebeccapurple', '', 'rebeccapurple.png', 'https://rebeccapurple.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | red', '', 'red.png', 'https://red.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | rosybrown', '', 'rosybrown.png', 'https://rosybrown.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | royalblue', '', 'royalblue.png', 'https://royalblue.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | saddlebrown', '', 'saddlebrown.png', 'https://saddlebrown.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | salmon', '', 'salmon.png', 'https://salmon.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | sandybrown', '', 'sandybrown.png', 'https://sandybrown.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | seagreen', '', 'seagreen.png', 'https://seagreen.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | seashell', '', 'seashell.png', 'https://seashell.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | sienna', '', 'sienna.png', 'https://sienna.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | silver', '', 'silver.png', 'https://silver.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | skyblue', '', 'skyblue.png', 'https://skyblue.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | slateblue', '', 'slateblue.png', 'https://slateblue.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | slategray', '', 'slategray.png', 'https://slategray.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | snow', '', 'snow.png', 'https://snow.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | springgreen', '', 'springgreen.png', 'https://springgreen.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | steelblue', '', 'steelblue.png', 'https://steelblue.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | tan', '', 'tan.png', 'https://tan.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | teal', '', 'teal.png', 'https://teal.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | thistle', '', 'thistle.png', 'https://thistle.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | tomato', '', 'tomato.png', 'https://tomato.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | turquoise', '', 'turquoise.png', 'https://turquoise.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | violet', '', 'violet.png', 'https://violet.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | wheat', '', 'wheat.png', 'https://wheat.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | white', '', 'white.png', 'https://white.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | whitesmoke', '', 'whitesmoke.png', 'https://whitesmoke.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | yellow', '', 'yellow.png', 'https://yellow.jocarsa.com');
INSERT INTO applications (id, app_name, description, logo, url) VALUES (NULL, 'jocarsa | yellowgreen', '', 'yellowgreen.png', 'https://yellowgreen.jocarsa.com');


```
**index.php**
```php
<?php
session_start();

// Si se envía el formulario de configuración, guardar los datos en sesión.
if ($_SERVER['REQUEST_METHOD'] === 'POST' && isset($_POST['guardar_config'])) {
    $_SESSION['server']   = trim($_POST['server']);
    $_SESSION['database'] = trim($_POST['database']);
    $_SESSION['user']     = trim($_POST['user']);
    $_SESSION['password'] = $_POST['password']; // Puede incluir espacios
    $mensaje = "Configuración guardada correctamente.";
}
?>
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Instalación del Sistema</title>
  <style>
    /* Awesome CSS para la página de instalación */
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      padding: 0;
      font-family: 'Helvetica', sans-serif;
      background: linear-gradient(135deg, #3a6186, #89253e);
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    .contenedor {
      background: rgba(0, 0, 0, 0.6);
      padding: 20px 30px;
      border-radius: 10px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
      max-width: 600px;
      width: 90%;
    }
    h1, h2 {
      text-align: center;
      margin-bottom: 20px;
    }
    form {
      margin-bottom: 20px;
    }
    label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
    }
    input[type="text"],
    input[type="password"],
    input[type="date"] {
      width: 100%;
      padding: 10px;
      margin-bottom: 15px;
      border: none;
      border-radius: 5px;
    }
    button, .boton {
      background: #ff7e67;
      border: none;
      color: #fff;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 1em;
      margin: 5px;
      transition: background 0.3s;
      text-decoration: none;
      display: inline-block;
    }
    button:hover, .boton:hover {
      background: #ff3b2e;
    }
    .opciones {
      text-align: center;
    }
    .mensaje {
      background: #28a745;
      padding: 10px;
      border-radius: 5px;
      text-align: center;
      margin-bottom: 15px;
    }
    .error {
      background: #dc3545;
      padding: 10px;
      border-radius: 5px;
      text-align: center;
      margin-bottom: 15px;
    }
  </style>
</head>
<body>
  <div class="contenedor">
    <h1>Instalación del Sistema</h1>
    
    <?php
      // Mostrar mensaje si existe
      if (isset($mensaje)) {
          echo "<div class='mensaje'>{$mensaje}</div>";
      }
    ?>

    <?php if (!isset($_SESSION['server']) || !isset($_SESSION['database']) || !isset($_SESSION['user'])): ?>
      <!-- Formulario para ingresar datos de conexión -->
      <form method="POST" action="">
        <label for="server">Servidor:</label>
        <input type="text" id="server" name="server" placeholder="Ej: localhost" required>
        
        <label for="database">Base de Datos:</label>
        <input type="text" id="database" name="database" placeholder="Nombre de la base de datos" required>
        
        <label for="user">Usuario:</label>
        <input type="text" id="user" name="user" placeholder="Usuario de la base de datos" required>
        
        <label for="password">Contraseña:</label>
        <input type="password" id="password" name="password" placeholder="Contraseña" required>
        
        <button type="submit" name="guardar_config">Guardar Configuración</button>
      </form>
    <?php else: ?>
      <!-- Menú de opciones de instalación -->
      <div class="opciones">
        <h2>Opciones de Instalación</h2>
        <p>Conectado a: <strong><?php echo htmlspecialchars($_SESSION['server']); ?></strong> | Base de Datos: <strong><?php echo htmlspecialchars($_SESSION['database']); ?></strong></p>
        <div>
          <!-- La opción "Eliminar Tablas" desactiva claves foráneas para forzar el borrado -->
          <a class="boton" href="?action=drop" onclick="return confirm('¿Está seguro de eliminar TODAS las tablas?')">Eliminar Tablas</a>
          <a class="boton" href="?action=truncate" onclick="return confirm('¿Está seguro de vaciar TODAS las tablas?')">Vaciar Tablas</a>
          <a class="boton" href="?action=instalar">Crear Tablas</a>
          <a class="boton" href="?action=datosdemuestra">Insertar Datos de Muestra</a>
          <a class="boton" href="?action=ir_app">Ir a la Aplicación</a>
        </div>
        <div style="margin-top:20px;">
          <a class="boton" href="?action=reset_config" onclick="return confirm('¿Desea reiniciar la configuración?')">Reiniciar Configuración</a>
        </div>
      </div>
    <?php endif; ?>

    <?php
    // Procesar acciones solicitadas mediante GET
    if (isset($_GET['action'])) {
        $action = $_GET['action'];
        // Verificar que la configuración esté disponible
        if (!isset($_SESSION['server']) || !isset($_SESSION['database']) || !isset($_SESSION['user'])) {
            echo "<div class='error'>La configuración de conexión no está establecida.</div>";
        } else {
            $server   = $_SESSION['server'];
            $database = $_SESSION['database'];
            $user     = $_SESSION['user'];
            $password = $_SESSION['password'];
            $mysqli   = new mysqli($server, $user, $password, $database);

            if ($mysqli->connect_error) {
                echo "<div class='error'>Error de conexión: " . $mysqli->connect_error . "</div>";
            } else {
                if ($action === 'drop') {
						 // Cerrar la conexión actual que usa la base de datos.
						 $mysqli->close();
						 // Reabrir la conexión sin especificar una base de datos.
						 $mysqli = new mysqli($server, $user, $password);
						 
						 if ($mysqli->connect_error) {
							  echo "<div class='error'>Error de conexión: " . $mysqli->connect_error . "</div>";
						 } else {
							  // Elimina la base de datos completa (esto elimina tablas, vistas, procedimientos, eventos, triggers, etc.)
							  if ($mysqli->query("DROP DATABASE IF EXISTS `$database`") === TRUE) {
									// Recrea la base de datos con la configuración deseada.
									$sqlCreateDB = "CREATE DATABASE `$database` DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;";
									if ($mysqli->query($sqlCreateDB) === TRUE) {
										 echo "<div class='mensaje'>Se ha eliminado TODO en la base de datos '$database' (tablas, vistas, procedimientos, eventos, triggers, etc.) y se ha recreado vacía.</div>";
									} else {
										 echo "<div class='error'>Error al crear la base de datos: " . $mysqli->error . "</div>";
									}
							  } else {
									echo "<div class='error'>Error al eliminar la base de datos: " . $mysqli->error . "</div>";
							  }
							  // Selecciona la base de datos recién creada para continuar.
							  $mysqli->select_db($database);
							  $mysqli->close();
						 }
					} elseif ($action === 'truncate') {
                    // Desactivar comprobación de claves foráneas y truncar todas las tablas
                    $mysqli->query("SET FOREIGN_KEY_CHECKS = 0");
                    $result = $mysqli->query("SHOW TABLES");
                    if ($result) {
                        $tables = [];
                        while ($row = $result->fetch_array()) {
                            $tables[] = $row[0];
                        }
                        foreach ($tables as $table) {
                            $mysqli->query("TRUNCATE TABLE `$table`");
                        }
                        $mysqli->query("SET FOREIGN_KEY_CHECKS = 1");
                        echo "<div class='mensaje'>Se han vaciado todas las tablas de la base de datos '$database'.</div>";
                    } else {
                        echo "<div class='error'>Error al obtener las tablas: " . $mysqli->error . "</div>";
                    }
                } elseif ($action === 'instalar') {
                    // Crear la base de datos (si no existe) y generar las tablas usando modelodedatos.sql
                    $sqlCreateDB = "CREATE DATABASE IF NOT EXISTS `$database` DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;";
                    if (!$mysqli->query($sqlCreateDB)) {
                        echo "<div class='error'>Error al crear la base de datos: " . $mysqli->error . "</div>";
                    }
                    $mysqli->select_db($database);
                    $sqlFilePath = __DIR__ . '/modelodedatos.sql';
                    $sqlScript   = file_get_contents($sqlFilePath);
                    if ($sqlScript === false) {
                        echo "<div class='error'>No se pudo leer el archivo modelodedatos.sql.</div>";
                    } else {
                        if ($mysqli->multi_query($sqlScript)) {
                            do {
                                // Consumir todos los resultados.
                            } while ($mysqli->more_results() && $mysqli->next_result());
                            echo "<div class='mensaje'>Instalación completada: Las tablas se han creado correctamente.</div>";
                        } else {
                            echo "<div class='error'>Error al crear las tablas: " . $mysqli->error . "</div>";
                        }
                    }
                } elseif ($action === 'datosdemuestra') {
                    // Insertar datos de muestra usando datosdemuestra.sql
                    $mysqli->select_db($database);
                    $sqlFilePath = __DIR__ . '/datosdemuestra.sql';
                    $sqlScript   = file_get_contents($sqlFilePath);
                    if ($sqlScript === false) {
                        echo "<div class='error'>No se pudo leer el archivo datosdemuestra.sql.</div>";
                    } else {
                        if ($mysqli->multi_query($sqlScript)) {
                            do {
                                // Consumir todos los resultados.
                            } while ($mysqli->more_results() && $mysqli->next_result());
                            echo "<div class='mensaje'>Los datos de ejemplo se han insertado correctamente en la base de datos '$database'.</div>";
                        } else {
                            echo "<div class='error'>Error al insertar datos de ejemplo: " . $mysqli->error . "</div>";
                        }
                    }
                } elseif ($action === 'reset_config') {
                    session_unset();
                    session_destroy();
                    echo "<div class='mensaje'>Configuración reiniciada. Recargue la página para reingresar los datos.</div>";
                } elseif ($action === 'ir_app') {
                    // Redirige a la aplicación principal (index.php en la raíz)
                    header("Location: ../index.php");
                    exit;
                }
                $mysqli->close();
            }
        }
    }
    ?>
  </div>
</body>
</html>


```
**modelodedatos.sql**
```sql
-- instalador/modelodedatos.sql

-- Tabla de usuarios
CREATE TABLE IF NOT EXISTS users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(255) NOT NULL UNIQUE,
    password VARCHAR(255) NOT NULL,
    name VARCHAR(255) NOT NULL,
    email VARCHAR(255) NOT NULL
);

-- Tabla de aplicaciones
CREATE TABLE IF NOT EXISTS applications (
    id INT AUTO_INCREMENT PRIMARY KEY,
    app_name VARCHAR(255) NOT NULL,
    description TEXT,
    logo VARCHAR(255),
    url VARCHAR(255) NOT NULL
);

-- Tabla de packs
CREATE TABLE IF NOT EXISTS packs (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255) NOT NULL
);

-- Tabla de apps_in_pack (aplicaciones en pack)
CREATE TABLE IF NOT EXISTS apps_in_pack (
    id INT AUTO_INCREMENT PRIMARY KEY,
    pack_id INT NOT NULL,
    app_id INT NOT NULL,
    FOREIGN KEY (pack_id) REFERENCES packs(id),
    FOREIGN KEY (app_id) REFERENCES applications(id)
);

-- Tabla de user_packs (packs de usuario)
CREATE TABLE IF NOT EXISTS user_packs (
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT NOT NULL,
    pack_id INT NOT NULL,
    FOREIGN KEY (user_id) REFERENCES users(id),
    FOREIGN KEY (pack_id) REFERENCES packs(id)
);

-- Tabla de administradores
CREATE TABLE IF NOT EXISTS admins (
    id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(255) NOT NULL UNIQUE,
    password VARCHAR(255) NOT NULL,
    full_name VARCHAR(255) NOT NULL,
    email VARCHAR(255) NOT NULL
);


```