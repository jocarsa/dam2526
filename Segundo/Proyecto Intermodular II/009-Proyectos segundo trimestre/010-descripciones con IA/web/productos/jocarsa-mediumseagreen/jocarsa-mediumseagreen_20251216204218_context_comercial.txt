PÃ¡gina web 
 Este es un pÃ¡rrafo.

TÃ­tulo 
 
 Nombre:

# Reporte de proyecto
## Estructura del proyecto
## CÃ³digo (intercalado)
# jocarsa-mediumseagreen
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
- Lee 'playlists_videos.json' (categorÃ­a "25/26").
- Intenta player_client: android -> mweb -> tv -> web (con cookies si existen).
- Convierte .vtt a TEXTO SÃ“LIDO (un Ãºnico pÃ¡rrafo), sin timestamps/etiquetas/roll-up.
- Crea .log cuando no hay 'es-orig'. (Opcional) Fallback a es/es-ES/es-419 si ALLOW_ES_FALLBACK=1.
# =======================
# CONFIG
# =======================
# =======================
# ---------- Limpieza VTT ----------
# ---------- Utilidades yt-dlp ----------
# Escaneo por si el extractor cambia el nombre
# cuando pides lenguajes, separa write-auto-subs y write-subs (por si hay manuales)
# ---------- Main ----------
# estricto por defecto
# fallback opcional (manual+auto)
# 1) Intentar es-orig
# 2) Fallback opcional a es/es-ES/es-419
# determinar cuÃ¡l llegÃ³
# 3) Convertir VTT -> TXT sÃ³lido
# localizar el VTT que bajÃ³
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
- temarios/DAM1/*.md y temarios/DAM2/*.md
* LÃ­nea SIN tab = Unidad (topic label: "Unidad")
* LÃ­nea CON un tab = Subunidad (topic label: "Unidad: Subunidad")
- transcripts_25_26/*.txt
* Ignora cabecera hasta una lÃ­nea de ----- (guiones), usa el resto como cuerpo.
- Divide el listado de topics en lotes (TOPIC_BATCH).
- Para cada lote, envÃ­a prompt al modelo (MODEL) con el cuerpo del vÃ­deo.
- El modelo devuelve JSON con matches (topic, score 0..1). Se fusiona y se filtra por THRESHOLD.
- video_topic_matches.json con:
- Ollama corriendo en http://localhost:11434 (ollama serve)
- Modelo Instruct: ej. ollama pull llama3.1:8b-instruct-q4_0
- pip install requests tqdm
# -------------------- Config --------------------
# --------------- Parsers ----------------
- Unidad -> "Unidad"
- Subunidad -> "Unidad: Subunidad"
# Dedup conservando orden
# separar cabecera/cuerpo
# recortar para no saturar el contexto
# intentar sacar ID de cabecera
# --------------- Core matching ---------------
# reintentos mÃ­nimos
# limpiar posibles backticks accidentales
# extraer el primer bloque JSON vÃ¡lido que encontremos
# (por si el modelo devuelve algo raro, aunque hemos forzado JSON-only)
# sanitizar
# aceptamos cualquier score; el filtrado por THRESHOLD serÃ¡ mÃ¡s tarde
# filtrar por THRESHOLD y ordenar
# dedup en listas by_topic
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
- Para vÃ­deos: se incluye `type:"video"` (retrocompatible si faltara).
- Para mensajes: NO hay `url`; se incluye `message` con el contenido del .txt.
# Rango de cursos igual que en index.php
# tolerante: ignora archivos que no cumplan patrÃ³n
# fuera de rangos definidos
# Construyo el tÃ­tulo estilo vÃ­deo: "YYYY MM DD HH MM SS "
# 1) Expandir playlists de YouTube (igual que antes)
# 2) AÃ±adir mensajes/*.txt como playlist "ðŸ›ˆ Mensajes" por curso
# si ya existe, aÃ±adimos; si no, creamos
# Mezclamos y ordenamos por fecha (derivable del tÃ­tulo)
# No hace falta ordenar aquÃ­ estrictamente; el frontend ordena por date,
# pero dejamos consistente por comodidad.
# 3) Guardar salida
# 4) Resumen
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
- Lee 'playlists_videos.json' (categorÃ­a "25/26").
- Prueba player_client=mweb -> tv -> web -> android (android al final por PO token).
- Prioriza subtÃ­tulos en espaÃ±ol (es, es-ES, es-419, es.*).
- Si no hay espaÃ±ol: toma el primer auto-caption disponible (p.ej. 'en').
- Como rescate final: --all-subs y luego filtra el mejor candidato.
- Convierte .vtt a texto sÃ³lido (un pÃ¡rrafo) sin timestamps, etiquetas, ni roll-up.
- Registra en .log los idiomas disponibles si no se consigue nada.
# =======================
# CONFIG
# =======================
# Ponemos android al final para evitar el problema del PO token si no lo usas
# Candidatos de idioma (prefijos y exactos) para espaÃ±ol:
# Prioridad para elegir el VTT si hay varios
# variantes es.* despuÃ©s
# Fallback si no hay espaÃ±ol: coger el primer idioma disponible de automatic_captions
# Si hay que caer a un auto-captions no espaÃ±ol, prioriza en este orden
# =======================
# UTILIDADES GENERALES
# =======================
# =======================
# YT-DLP HELPERS
# =======================
# Cualquier archivo que empiece por el nombre base y tenga .es*.vtt
# yt-dlp nombra subs como " . .vtt"
# " . .vtt" -> extrae 
# =======================
# DESCARGA PRINCIPAL (con fallback)
# =======================
# 1) prioridad preferida
# 2) si no, la primera clave disponible
# Si no hay .es*.vtt, quizÃ¡ el idioma fue otro (fallback): busca cualquier . .vtt solicitado
# 1Âº intenta espaÃ±ol
# 2Âº si no hay espaÃ±ol, cualquier vtt priorizado
# === Flujo principal por clientes ===
# 1) Idiomas espaÃ±oles exactos
# 2) Fallback: primer auto disponible (p.ej. 'en'), si estÃ¡ activado
# 3) Rescate --all-subs y luego elegir
# Segundo intento de rescate global si nada funcionÃ³
# =======================
# MAIN
# =======================
# 1) Descargar subtÃ­tulos (espaÃ±ol o fallback)
# Para diagnÃ³stico: listar subs disponibles por cada client
# 2) Convertir VTT -> TEXTO SÃ“LIDO
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
- Lee .txt y extrae cuerpo (ignora cabecera hasta la lÃ­nea de guiones).
- Chunking por caracteres (con cortes suaves por oraciones).
- MAP: genera "notas" para cada chunk (en espaÃ±ol).
- REDUCE: sintetiza un Ãºnico .md didÃ¡ctico.
- Ollama ejecutÃ¡ndose en http://localhost:11434
- Un modelo Instruct disponible (p.ej., 'llama3.1:8b-instruct-q4_0')
# ============== CONFIG ==============
# ====================================
# corte por oraciones
# detectar lÃ­nea de guiones del header
# compactar espacios
# Opcionales que puedes ajustar:
# Estructura tÃ­pica: {'message': {'role':'assistant','content':'...'}, ...}
# MAP
# seguimos con los demÃ¡s
# REDUCE
# Asegurar encabezado principal (por si el modelo no lo pone)
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
- Lee .txt y extrae cuerpo (ignora cabecera hasta la lÃ­nea de guiones).
- Chunking por caracteres (con cortes suaves por oraciones).
- MAP: genera "notas" para cada chunk (en espaÃ±ol) usando la API remota.
- REDUCE: sintetiza un Ãºnico .md didÃ¡ctico usando la API remota.
- API remota disponible (ejemplo: https://covalently-untasked-daphne.ngrok-free.dev/api.php)
- Clave de API vÃ¡lida.
# ============== CONFIG ==============
# ====================================
# MAP
# REDUCE
# jocarsa-mediumseagreen
#temariosAcc .clickable.active{background:#effaf4;border-radius:6px}
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
# EDITA ESTA LISTA con uno o varios IDs de vÃ­deo
# MANUALES (no generadas)
# AUTO-GENERADAS
# Idiomas a los que YouTube dice que podrÃ­a traducir
## data
### transcripts
## mensajes
## resumenes
## scripts
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
- Lee 'playlists_videos.json' (categorÃ­a "25/26").
- Intenta player_client: android -> mweb -> tv -> web (con cookies si existen).
- Convierte .vtt a TEXTO SÃ“LIDO (un Ãºnico pÃ¡rrafo), sin timestamps/etiquetas/roll-up.
- Crea .log cuando no hay 'es-orig'. (Opcional) Fallback a es/es-ES/es-419 si ALLOW_ES_FALLBACK=1.
# =======================
# CONFIG
# =======================
# =======================
# ---------- Limpieza VTT ----------
# ---------- Utilidades yt-dlp ----------
# Escaneo por si el extractor cambia el nombre
# cuando pides lenguajes, separa write-auto-subs y write-subs (por si hay manuales)
# ---------- Main ----------
# estricto por defecto
# fallback opcional (manual+auto)
# 1) Intentar es-orig
# 2) Fallback opcional a es/es-ES/es-419
# determinar cuÃ¡l llegÃ³
# 3) Convertir VTT -> TXT sÃ³lido
# localizar el VTT que bajÃ³
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
- Ollama en ejecuciÃ³n (http://localhost:11434)
- Modelo embeddings: nomic-embed-text (ollama pull nomic-embed-text)
- pip install requests tqdm
# Opciones
# Ollama devuelve {"embeddings": [[...], ...]}
- ("Unidad", "Unidad")
- ("Unidad: Subunidad", "Unidad: Subunidad")
# Quitar duplicados conservando orden
# Embeddings de topics
# Para cada vÃ­deo, computa similitud mÃ¡xima a cada topic
# embed doc (o chunks)
# mejor score contra cualquiera de los chunks
# Limpia duplicados en by_topic

# Reporte de proyecto

## Estructura del proyecto

```
/var/www/html/jocarsa-mediumseagreen
â”œâ”€â”€ .gitignore
â”œâ”€â”€ 101-descargatranscripciones.py
â”œâ”€â”€ 102-matchsemantico.py
â”œâ”€â”€ 1videos.py
â”œâ”€â”€ 2025 09 15 14 00 25.es-orig.vtt
â”œâ”€â”€ 2transcripciones.py
â”œâ”€â”€ 3-resumenes.py
â”œâ”€â”€ 3-resumenes_api.py
â”œâ”€â”€ README.md
â”œâ”€â”€ admin.php
â”œâ”€â”€ app.db
â”œâ”€â”€ cookies.txt
â”œâ”€â”€ data
â”‚ â””â”€â”€ transcripts
â”‚ â”œâ”€â”€ -RDOj4L_tbQ.err.txt
â”‚ â”œâ”€â”€ -tfOR-7-ot0.err.txt
â”‚ â”œâ”€â”€ 0GIWmbes4r4.err.txt
â”‚ â”œâ”€â”€ 0f_x-UW1-Xo.err.txt
â”‚ â”œâ”€â”€ 0zT0fjtfKvk.err.txt
â”‚ â”œâ”€â”€ 19ytHnaGMxU.err.txt
â”‚ â”œâ”€â”€ 1B06SiYAcXE.err.txt
â”‚ â”œâ”€â”€ 1pky5c5XObc.err.txt
â”‚ â”œâ”€â”€ 27jbqVhXLRA.err.txt
â”‚ â”œâ”€â”€ 3nDd0WS0zhM.err.txt
â”‚ â”œâ”€â”€ 5jAqDwS5dfM.err.txt
â”‚ â”œâ”€â”€ 7kEKJr_eFo4.err.txt
â”‚ â”œâ”€â”€ 9y6e4u9zdM4.err.txt
â”‚ â”œâ”€â”€ DgIg5qB2hBc.err.txt
â”‚ â”œâ”€â”€ E12FlCM5aI0.err.txt
â”‚ â”œâ”€â”€ EtSSYwFzDoI.err.txt
â”‚ â”œâ”€â”€ FPJU2TlNpwg.err.txt
â”‚ â”œâ”€â”€ GvL7FBp8jQk.err.txt
â”‚ â”œâ”€â”€ HEHuwFNd-_U.err.txt
â”‚ â”œâ”€â”€ IN4zMMPK-BA.err.txt
â”‚ â”œâ”€â”€ J7niVLzvh5s.err.txt
â”‚ â”œâ”€â”€ JE_bk1C_u-o.err.txt
â”‚ â”œâ”€â”€ JUzCUvx31Aw.err.txt
â”‚ â”œâ”€â”€ J_t4zw_liKY.err.txt
â”‚ â”œâ”€â”€ K5qtKM0zilo.err.txt
â”‚ â”œâ”€â”€ KbF71eC8ljc.err.txt
â”‚ â”œâ”€â”€ Kk0rK1qNzho.err.txt
â”‚ â”œâ”€â”€ LvCWw01oO6c.err.txt
â”‚ â”œâ”€â”€ NCrxOeq1SzQ.err.txt
â”‚ â”œâ”€â”€ N_LgpLSeD4w.err.txt
â”‚ â”œâ”€â”€ PZvYIGLo0cI.err.txt
â”‚ â”œâ”€â”€ TObfVjd18bU.err.txt
â”‚ â”œâ”€â”€ WS404tR6g7o.err.txt
â”‚ â”œâ”€â”€ X5K8JjyXawI.err.txt
â”‚ â”œâ”€â”€ XK9hx64t4IE.err.txt
â”‚ â”œâ”€â”€ Yum4NUXaSRE.err.txt
â”‚ â”œâ”€â”€ as1gCkyUJsM.err.txt
â”‚ â”œâ”€â”€ b7yGHH-cUVQ.err.txt
â”‚ â”œâ”€â”€ bS1HUBg5SxE.err.txt
â”‚ â”œâ”€â”€ beGKr-wXqrU.err.txt
â”‚ â”œâ”€â”€ bpoy7cDhEsQ.err.txt
â”‚ â”œâ”€â”€ frUfuMvQUJQ.err.txt
â”‚ â”œâ”€â”€ giUJUQTGQjU.err.txt
â”‚ â”œâ”€â”€ j0DFdwaUabw.err.txt
â”‚ â”œâ”€â”€ kBRRsnX1-Lk.err.txt
â”‚ â”œâ”€â”€ lY8iTZNcJTY.err.txt
â”‚ â”œâ”€â”€ oH8-0M5DCT0.err.txt
â”‚ â”œâ”€â”€ pMB1MM_yzGo.err.txt
â”‚ â”œâ”€â”€ ruuPTmqQqKA.err.txt
â”‚ â”œâ”€â”€ uwrMsmDlPQ4.err.txt
â”‚ â”œâ”€â”€ w5-ndTuHh8U.err.txt
â”‚ â”œâ”€â”€ wMR6E95iSOo.err.txt
â”‚ â”œâ”€â”€ wbOPSGb7-HU.err.txt
â”‚ â”œâ”€â”€ wmzKliHTZKI.err.txt
â”‚ â”œâ”€â”€ xdmKk0Rskh4.err.txt
â”‚ â”œâ”€â”€ y_Yx5jR5h1I.err.txt
â”‚ â”œâ”€â”€ zN-otiIFUus.err.txt
â”‚ â”œâ”€â”€ zowDFAnNjOQ.err.txt
â”‚ â””â”€â”€ zxa6A-AF9Lo.err.txt
â”œâ”€â”€ estilo.css
â”œâ”€â”€ index.php
â”œâ”€â”€ listas.json
â”œâ”€â”€ mediumseagreen.png
â”œâ”€â”€ mediumseagreenfondo.png
â”œâ”€â”€ mediumseagreenfondoblur.png
â”œâ”€â”€ mensajes
â”‚ â”œâ”€â”€ 2025-09-03-17-35-00-SesiÃ³n de bienvenida ciclos formativos SMR y DAM - Inicio del nuevo curso en TAME.txt
â”‚ â”œâ”€â”€ 2025-09-05-14-19-00-Enlace a la sesiÃ³n de bienvenida del lunes en Zoom - SMR y DAM.txt
â”‚ â”œâ”€â”€ 2025-09-09-13-45-00-Bienvenidos al curso.txt
â”‚ â”œâ”€â”€ 2025-09-10-11-42-00-Encuesta motivaciÃ³n e intereses DAM1 y DAM2.txt
â”‚ â”œâ”€â”€ 2025-09-10-14-00-00-Inicio de las clases.txt
â”‚ â”œâ”€â”€ 2025-09-12-21-28-00-A programar, se aprende programando (DAM1 y DAM2).txt
â”‚ â”œâ”€â”€ 2025-09-13-11-50-00-Editores de cÃ³digo.txt
â”‚ â”œâ”€â”€ 2025-09-16-11-40-00-Plantillas de actividades de ejemplo en mi GitHub.txt
â”‚ â”œâ”€â”€ 2025-09-16-14-50-00-Plataformas para la formacion.txt
â”‚ â”œâ”€â”€ 2025-09-20-17-56-00-mensaje actividades alumnos.txt
â”‚ â”œâ”€â”€ 2025-09-21-15-00-00-Curriculum.txt
â”‚ â”œâ”€â”€ 2025-09-23-20-43-00-Ya estÃ¡n disponibles las actividades.txt
â”‚ â”œâ”€â”€ 2025-09-26-08-12-00-Convalidaciones - importante.txt
â”‚ â”œâ”€â”€ 2025-09-26-11-54-00-Resumen hasta el momento.txt
â”‚ â”œâ”€â”€ 2025-09-28-20-22-00-Suspension de las clases - maÃ±ana lunes 29 de septiembre - alerta meteorolÃ³gica - DAM1 y DAM2.txt
â”‚ â””â”€â”€ 2025-09-30-09-36-00-Clases en DAM1 y DAM2 - martes 30 de septiembre de 2025.txt
â”œâ”€â”€ playlists_videos.json
â”œâ”€â”€ resumenes
â”œâ”€â”€ scripts
â”‚ â”œâ”€â”€ 101-descargatranscripciones.py
â”‚ â”œâ”€â”€ 102-matchsemantico.py
â”‚ â””â”€â”€ transcripts_25_26
â”œâ”€â”€ temarios
â”‚ â”œâ”€â”€ DAM1
â”‚ â”‚ â”œâ”€â”€ Bases de datos.md
â”‚ â”‚ â”œâ”€â”€ Entornos de desarrollo.md
â”‚ â”‚ â”œâ”€â”€ Lenguajes de marcas y sistemas de gestiÃ³n de informaciÃ³n.md
â”‚ â”‚ â”œâ”€â”€ ProgramaciÃ³n.md
â”‚ â”‚ â””â”€â”€ Sistemas informÃ¡ticos.md
â”‚ â””â”€â”€ DAM2
â”‚ â”œâ”€â”€ Acceso a datos.md
â”‚ â”œâ”€â”€ Desarrollo de interfaces.md
â”‚ â”œâ”€â”€ ProgramaciÃ³n de servicios y procesos.md
â”‚ â”œâ”€â”€ ProgramaciÃ³n multimedia y dispositivos mÃ³viles.md
â”‚ â””â”€â”€ Sistemas de gestiÃ³n empresarial.md
â”œâ”€â”€ transcripts_25_26
â”‚ â”œâ”€â”€ 2025 09 11 14 03 07.es-orig.vtt
â”‚ â”œâ”€â”€ 2025 09 11 14 03 07.txt
â”‚ â”œâ”€â”€ 2025 09 11 14 59 11.es-orig.vtt
â”‚ â”œâ”€â”€ 2025 09 11 14 59 11.txt
â”‚ â”œâ”€â”€ 2025 09 11 16 04 53.es-orig.vtt
â”‚ â”œâ”€â”€ 2025 09 11 16 04 53.txt
â”‚ â”œâ”€â”€ 2025 09 11 17 09 30.es-orig.vtt
â”‚ â”œâ”€â”€ 2025 09 11 17 09 30.txt
â”‚ â”œâ”€â”€ 2025 09 11 17 53 05.es-orig.vtt
â”‚ â”œâ”€â”€ 2025 09 11 17 53 05.txt
â”‚ â”œâ”€â”€ 2025 09 11 19 06 28.es-orig.vtt
â”‚ â”œâ”€â”€ 2025 09 11 19 06 28.txt
â”‚ â”œâ”€â”€ 2025 09 11 20 14 41.es-orig.vtt
â”‚ â”œâ”€â”€ 2025 09 11 20 14 41.txt
â”‚ â”œâ”€â”€ 2025 09 12 13 31 39 DAM2 Proyecto Intermodular II.es-orig.vtt
â”‚ â”œâ”€â”€ 2025 09 12 13 31 39 DAM2 Proyecto Intermodular II.txt
â”‚ â”œâ”€â”€ 2025 09 12 15 01 06 DAM 2 Sistemas de gestiÃ³n empresarial.es-orig.vtt
â”‚ â”œâ”€â”€ 2025 09 12 15 01 06 DAM 2 Sistemas de gestiÃ³n empresarial.txt
â”‚ â”œâ”€â”€ 2025 09 15 13 01 41.es-orig.vtt
â”‚ â”œâ”€â”€ 2025 09 15 13 01 41.txt
â”‚ â”œâ”€â”€ 2025 09 15 14 00 25.es-orig.vtt
â”‚ â”œâ”€â”€ 2025 09 15 14 00 25.txt
â”‚ â”œâ”€â”€ 2025 09 15 14 28 55.es-orig.vtt
â”‚ â”œâ”€â”€ 2025 09 15 14 28 55.txt
â”‚ â”œâ”€â”€ 2025 09 15 15 06 11.es-orig.vtt
â”‚ â”œâ”€â”€ 2025 09 15 15 06 11.txt
â”‚ â”œâ”€â”€ 2025 09 15 15 59 17.es-orig.vtt
â”‚ â”œâ”€â”€ 2025 09 15 15 59 17.txt
â”‚ â”œâ”€â”€ 2025 09 15 17 01 45.es-orig.vtt
â”‚ â”œâ”€â”€ 2025 09 15 17 01 45.txt
â”‚ â”œâ”€â”€ 2025 09 15 18 05 19.es-orig.vtt
â”‚ â”œâ”€â”€ 2025 09 15 18 05 19.txt
â”‚ â”œâ”€â”€ 2025 09 15 19 26 56.es-orig.vtt
â”‚ â”œâ”€â”€ 2025 09 15 19 26 56.txt
â”‚ â”œâ”€â”€ 2025 09 18 14 01 19.es-orig.vtt
â”‚ â”œâ”€â”€ 2025 09 18 14 01 19.txt
â”‚ â”œâ”€â”€ 2025 09 18 15 00 59.es-orig.vtt
â”‚ â”œâ”€â”€ 2025 09 18 15 00 59.txt
â”‚ â”œâ”€â”€ 2025 09 18 16 05 55.es-orig.vtt
â”‚ â”œâ”€â”€ 2025 09 18 16 05 55.txt
â”‚ â”œâ”€â”€ 2025 09 18 16 59 08.es-orig.vtt
â”‚ â”œâ”€â”€ 2025 09 18 16 59 08.txt
â”‚ â”œâ”€â”€ 2025 09 18 17 14 14.es-orig.vtt
â”‚ â”œâ”€â”€ 2025 09 18 17 14 14.txt
â”‚ â”œâ”€â”€ 2025 09 18 18 02 42.es-orig.vtt
â”‚ â”œâ”€â”€ 2025 09 18 18 02 4